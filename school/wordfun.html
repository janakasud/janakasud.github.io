<!-- 
MIT License, Copyright (c) 2025 Janaka S.
Free to use, modify, and distribute with no warranty. See LICENSE for details.
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Fun</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        /*
        REMOVED: #input-container position: absolute; top: 2.5rem; left: 0; right: 0;
        This was causing the horizontal centering issue by taking the element out of the flow.
        */
        
        #input-container {
            /* Now only using transition for a visual effect */
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        /* Use opacity 1 and a non-absolute position for centering */
        #input-container:not(.hidden) {
            opacity: 1;
        }

        #feedback-message {
            transition: opacity 0.3s ease;
        }

        #feedback-message.hidden {
            opacity: 0;
        }

        .word-btn.hidden {
            visibility: hidden;
            /* Using visibility for the button to maintain layout space */
        }

        #file-upload {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col">

    <header class="bg-white shadow-md sticky top-0 z-50 w-full">
        <div class="max-w-7xl mx-auto px-4 lg:px-8 py-3 flex justify-between items-center">
            <a href="wordfun.html" class="hover:opacity-75 transition-opacity duration-200">
                <img 
                    src="./images/logo_jj_2025-11-27.png" 
                    alt="Janaka's Journal Logo (JJ)" 
                    class="h-12 sm:h-16"
                />
            </a>
            <div class="flex-grow flex justify-center">
                <h2 class="text-xl font-bold text-gray-800 tracking-wide">Wordfun</h2>
            </div>

            <nav class="flex items-center space-x-4">
                <a href="../index.html" class="text-gray-600 hover:text-gray-800">Home</a>
                <a href="../satcom/satcom.html" class="text-gray-600 hover:text-gray-800">Satcom</a>
                <a href="../satcom/satcom.html" class="text-gray-600 hover:text-gray-800">From LinkedIn</a>
                <a href="wordfun.html" class="text-gray-600 hover:text-gray-800">Kids Learn</a>
            </nav>
        </div>
    </header>

    <main class="bg-white p-8 rounded-lg shadow-md w-full max-w-3xl space-y-6 mx-auto my-auto">
        <h1 class="text-3xl font-bold text-gray-800 text-center">Word Fun</h1>
        <p class="text-gray-600 text-center">Practice spelling and pronunciation</p>

        <div class="flex flex-col sm:flex-row justify-center gap-4 items-center">
            <select id="list-select"
                class="border border-gray-300 p-2 rounded-lg text-lg focus:ring-2 focus:ring-blue-600 w-full sm:w-auto"></select>
            <select id="language-select"
                class="border border-gray-300 p-2 rounded-lg text-lg focus:ring-2 focus:ring-blue-600 w-full sm:w-auto">
                <option value="en-GB">UK English</option>
                <option value="en-US">US English</option>
            </select>
            <label for="file-upload"
                class="border border-gray-300 px-4 py-2 rounded-lg text-blue-600 hover:bg-blue-100 text-lg flex items-center justify-center gap-2 cursor-pointer w-full sm:w-auto">
                üìÇ Upload a List
            </label>
            <input type="file" id="file-upload" accept=".txt,.csv" />
            <button onclick="saveResults()"
                class="border border-gray-300 px-4 py-2 rounded-lg text-blue-600 hover:bg-blue-100 text-lg flex items-center justify-center gap-2 cursor-pointer w-full sm:w-auto">
                üìÑ Save Results
            </button>
        </div>

        <div class="flex justify-center gap-2 mb-4 flex-wrap" id="word-buttons"></div>

        <div class="w-full">
            <div id="feedback" class="text-center text-lg text-gray-700">
                <div id="input-container" class="hidden flex flex-col items-center gap-4 sm:flex-row sm:gap-2 mx-auto">
                    <input id="spelling-input" type="text" spellcheck="false"
                        class="border border-gray-300 rounded-lg text-lg text-center flex-1 focus:ring-2 focus:ring-blue-600 p-2"
                        placeholder="Spell the word">
                    <button id="submit-spelling"
                        class="border border-gray-300 rounded-lg text-blue-600 hover:bg-blue-100 text-lg px-4 py-2"
                        tabindex="0">
                        Submit
                    </button>
                </div>
                <div id="feedback-message" class="text-lg"></div>
            </div>
        </div>

        <div class="flex flex-col sm:flex-row justify-center gap-4">
            <button onclick="listenWord()"
                class="border border-gray-300 px-4 py-2 rounded-lg text-blue-600 hover:bg-blue-100 text-lg flex items-center justify-center gap-2"
                tabindex="0">
                üéß Hear
            </button>
            <button onclick="pronounceWord()"
                class="border border-gray-300 px-4 py-2 rounded-lg text-blue-600 hover:bg-blue-100 text-lg flex items-center justify-center gap-2"
                tabindex="0">
                üé§ Say
            </button>
            <button onclick="spellWord()"
                class="border border-gray-300 px-4 py-2 rounded-lg text-blue-600 hover:bg-blue-100 text-lg flex items-center justify-center gap-2"
                tabindex="0">
                ‚úçÔ∏è Spell
            </button>
            <button onclick="pickRandomWord()"
                class="border border-gray-300 px-4 py-2 rounded-lg text-blue-600 hover:bg-blue-100 text-lg flex items-center justify-center gap-2"
                tabindex="0">
                üé≤ Pick a Random Word
            </button>
        </div>

        <div class="flex flex-col sm:flex-row gap-4">
            <div class="flex-1">
                <p class="text-lg font-bold text-gray-800">Spelling Progress</p>
                <div class="w-full bg-gray-200 rounded-full h-4">
                    <div id="spelling-progress-bar" class="bg-blue-600 h-4 rounded-full" style="width: 0%"></div>
                </div>
                <p id="spelling-score" class="text-lg text-gray-700 mt-1">Spelling: 0/0</p>
            </div>
            <div class="flex-1">
                <p class="text-lg font-bold text-gray-800">Pronunciation Progress</p>
                <div class="w-full bg-gray-200 rounded-full h-4">
                    <div id="pronunciation-progress-bar" class="bg-blue-600 h-4 rounded-full" style="width: 0%"></div>
                </div>
                <p id="pronunciation-score" class="text-lg text-gray-700 mt-1">Pronunciation: 0/0</p>
            </div>
        </div>

        <div class="bg-gray-50 p-4 rounded-lg text-center">
            <div class="flex flex-row items-center justify-center gap-4">
                <h2 class="text-lg font-bold text-gray-800">Your Stars üåü</h2>
                <p id="level-display" class="text-lg font-bold text-gray-800">Level: Beginner</p>
            </div>
        </div>

        <a href="index.html"
           class="text-blue-600 hover:text-blue-800 transition-colors duration-200 block text-lg text-center">
            Back to Home
        </a>
    </main>



    <audio id="correct-sound" src="https://example.com/ding.mp3"></audio>
    <audio id="incorrect-sound" src="https://example.com/whoops.mp3"></audio>

    <script>
        let activeWord = '';
        let activeButton = null;
        let currentList = 'g3-list1';
        let pronunciationScore = 0;
        let spellingScore = 0;
        let spellingStars = 0;
        let pronunciationStars = 0;
        let wordStatus = {};
        let currentLanguage = 'en-US';
        let customListCount = 0;

        const inputEl = document.getElementById('spelling-input');
        const inputContainer = document.getElementById('input-container');
        const feedbackEl = document.getElementById('feedback-message');
        const wordButtonsContainer = document.getElementById('word-buttons');
        const listSelect = document.getElementById('list-select');
        const languageSelect = document.getElementById('language-select');
        const fileUpload = document.getElementById('file-upload');
        const levelDisplayEl = document.getElementById('level-display');
        const spellingProgressBarEl = document.getElementById('spelling-progress-bar');
        const pronunciationProgressBarEl = document.getElementById('pronunciation-progress-bar');
        const spellingScoreEl = document.getElementById('spelling-score');
        const pronunciationScoreEl = document.getElementById('pronunciation-score');
        const submitButton = document.getElementById('submit-spelling');

        let wordLists = {
            'g1-list1': ['cat', 'dog', 'sun', 'tree', 'ball'],
            'g2-list1': ['house', 'book', 'apple', 'happy', 'jump'],
            'g3-list1': ['beautiful', 'butterflies', 'fence', 'water fountain', 'squirrel', 'colourful', 'fragrance', 'relaxing', 'environment'],
            'g4-list1': ['clumps', 'solar system', 'stretches', 'variety', 'brighter', 'swirled', 'billions', 'destroy', 'warning', 'eventually'],
            'g4-list2': ['disappear', 'gravitational', 'evidence', 'tumbling', 'central', 'disaster', 'destruction', 'plague', 'kilometres', 'artist'],
            'g4-list3': ['humid', 'paddock', 'summer', 'wrapped', 'vanished', 'saucepans', 'believe', 'feathery', 'ground', 'shoulder'],
            'g4-list4': ['murmured', 'frowned', 'streaks', 'blanket', 'shoebox', 'followed', 'chimney', 'awfully', 'whispering', 'imagination'],
            'g4-list5': ['affectionate', 'gnarly', 'hunched', 'moisture', 'jostled', 'starve', 'interested', 'bathroom', 'vegetable', 'purple'],
            'g4-list6': ['furnace', 'empire', 'scruffy', 'conquering', 'village', 'winter', 'materials', 'children', 'twenties', 'hairstyle'],
            'g4-list7': ['vacuum', 'entertained', 'tableware', 'blissful', 'several', 'mistress', 'whiteboards', 'scrawled', 'graffiti', 'advertisement'],
            'g4-list8': ['ceremony', 'gladiator', 'lengthy', 'corridors', 'breathe', 'couches', 'relax', 'chariots', 'battling', 'programme'],
            'g4-list9': ['wonderful', 'illustrator', 'fascinating', 'because', 'quickest', 'inspire', 'actual', 'birthday', 'enthusiastic', 'regretful'],
            'g4-list10': ['critical', 'creative', 'bread', 'golden', 'statement', 'delighted', 'synonym', 'invade', 'drawing', 'question'],
            'g5-list1': ['explore', 'courage', 'planet', 'mystery', 'invent']
        };

        function populateListSelect() {
            listSelect.innerHTML = '';
            Object.keys(wordLists).forEach(key => {
                const option = document.createElement('option');
                option.value = key;
                const [grade, listNum] = key.split('-');
                const gradeNum = grade.replace('g', '');
                const listIndex = listNum.replace('list', '');
                option.textContent = `Grade ${gradeNum} List ${listIndex}`;
                listSelect.appendChild(option);
            });
            listSelect.value = 'g3-list1';
        }

        populateListSelect();

        listSelect.addEventListener('change', (e) => {
            currentList = e.target.value;
            activeWord = '';
            activeButton = null;
            wordStatus = {};
            pronunciationScore = 0;
            spellingScore = 0;
            spellingStars = 0;
            pronunciationStars = 0;
            renderWordButtons(currentList);
            updateFeedbackMessage();
            updateScores();
        });

        languageSelect.addEventListener('change', (e) => {
            currentLanguage = e.target.value;
            showFeedback(`Language set to ${currentLanguage === 'en-US' ? 'US English' : 'UK English'}!`, 'blue');
        });

        fileUpload.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = (event) => {
                let words = [];
                const content = event.target.result;
                if (file.name.endsWith('.txt')) {
                    words = content.split('\n').map(word => word.trim()).filter(word => word);
                } else if (file.name.endsWith('.csv')) {
                    words = content.split('\n').map(line => line.split(',')[0].trim()).filter(word => word);
                }
                if (words.length === 0) {
                    showFeedback('No valid words found in the file!', 'red');
                    return;
                }
                customListCount++;
                const customListKey = `custom-list-${customListCount}`;
                wordLists[customListKey] = words;
                const option = document.createElement('option');
                option.value = customListKey;
                option.textContent = `Custom List ${customListCount}`;
                listSelect.appendChild(option);
                listSelect.value = customListKey;
                currentList = customListKey;
                activeWord = '';
                activeButton = null;
                wordStatus = {};
                pronunciationScore = 0;
                spellingScore = 0;
                spellingStars = 0;
                pronunciationStars = 0;
                renderWordButtons(currentList);
                updateFeedbackMessage();
                updateScores();
                showFeedback(`Custom List ${customListCount} loaded!`, 'blue');
                fileUpload.value = '';
            };
            reader.readAsText(file);
        });

        submitButton.addEventListener('click', checkSpelling);

        renderWordButtons(currentList);
        updateFeedbackMessage();
        updateScores();

        function normalizeText(text) {
            return text.toLowerCase().replace(/[^\w\s]/g, '').replace(/\s+/g, ' ').trim();
        }

        function saveResults() {
            const listName = listSelect.options[listSelect.selectedIndex].text;
            const timestamp = new Date().toISOString().replace(/T/, ' ').replace(/\..+/, '');
            let csvContent = `Word List,Word,Spelled Right,Said Right\n`;
            wordLists[currentList].forEach(word => {
                const spelled = wordStatus[word]?.spelledCorrectly ? 'Yes' : 'No';
                const pronounced = wordStatus[word]?.dictatedCorrectly ? 'Yes' : 'No';
                csvContent += `"${listName}","${word}","${spelled}","${pronounced}"\n`;
            });
            csvContent += `\nYour Stars,\n`;
            csvContent += `Spelling Stars,${spellingStars}\n`;
            csvContent += `Pronunciation Stars,${pronunciationStars}\n`;
            csvContent += `Message,Great job! You mastered ${spellingScore + pronunciationScore} skills!\n`;
            csvContent += `Report Generated,${timestamp}\n`;

            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `word_fun_${timestamp.replace(/[: ]/g, '-')}.csv`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            showFeedback('Your results are saved! üåü', 'blue');
        }

        function renderWordButtons(list) {
            wordButtonsContainer.innerHTML = '';
            if (!wordLists[list] || wordLists[list].length === 0) {
                showFeedback('No words in this list. Try another!', 'red');
                return;
            }
            wordLists[list].forEach(word => {
                if (!wordStatus[word]) {
                    wordStatus[word] = { spelledCorrectly: false, dictatedCorrectly: false };
                }
                const button = document.createElement('button');
                button.id = `${word.replace(/\s+/g, '-')}-btn`;
                button.textContent = word;
                let buttonClasses = 'word-btn border border-gray-300 px-3 py-1 rounded-lg text-lg text-blue-600 hover:bg-blue-100 focus:ring-2 focus:ring-blue-600';
                if (wordStatus[word].spelledCorrectly) buttonClasses += ' text-green-600';
                if (wordStatus[word].dictatedCorrectly) buttonClasses += ' bg-blue-50';
                button.className = buttonClasses;
                button.setAttribute('aria-pressed', 'false');
                button.onclick = () => setActiveWord(word, button);
                button.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        setActiveWord(word, button);
                    }
                });
                wordButtonsContainer.appendChild(button);
            });
            if (activeWord) {
                const activeBtn = document.getElementById(`${activeWord.replace(/\s+/g, '-')}-btn`);
                if (activeBtn) {
                    activeButton = activeBtn;
                    updateButtonHighlight();
                }
            }
        }

        function setActiveWord(word, button) {
            document.querySelectorAll('.word-btn').forEach(btn => {
                btn.classList.remove('hidden');
            });
            inputContainer.classList.add('hidden');
            activeWord = word;
            activeButton = button;
            clearFeedback();
            inputEl.value = '';
            updateButtonHighlight();
            updateFeedbackMessage();
            if (currentList.startsWith('g1') || currentList.startsWith('g2')) {
                listenWord();
            }
        }

        function updateButtonHighlight() {
            document.querySelectorAll('.word-btn').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white', 'border-blue-600', 'shadow-md');
                btn.setAttribute('aria-pressed', 'false');
                const word = btn.textContent;
                if (wordStatus[word]) {
                    if (wordStatus[word].spelledCorrectly) btn.classList.add('text-green-600');
                    if (wordStatus[word].dictatedCorrectly) btn.classList.add('bg-blue-50');
                }
            });
            if (activeButton) {
                activeButton.classList.add('bg-blue-600', 'text-white', 'border-blue-600', 'shadow-md');
                activeButton.setAttribute('aria-pressed', 'true');
            }
        }

        function updateFeedbackMessage() {
            if (!activeWord) {
                feedbackEl.textContent = 'Pick a word to start!';
            } else {
                feedbackEl.innerHTML = `Yay! You picked <span class="text-blue-600">"${activeWord}"</span>! Choose an action!`;
                feedbackEl.classList.add('text-gray-700');
            }
            feedbackEl.classList.remove('hidden');
        }

        function clearFeedback() {
            feedbackEl.textContent = '';
            feedbackEl.classList.remove('text-green-600', 'text-red-600', 'text-blue-600');
            feedbackEl.classList.add('text-gray-700', 'hidden');
            inputEl.value = '';
        }

        function listenWord() {
            if (!activeWord) return showFeedback('Pick a word!', 'red');
            disableButtons(true);
            const utterance = new SpeechSynthesisUtterance(activeWord);
            utterance.lang = currentLanguage;
            utterance.onend = () => disableButtons(false);
            speechSynthesis.speak(utterance);
            showFeedback(`Hear "${activeWord}"!`, 'blue');
        }

        function pronounceWord() {
            if (!activeWord) return showFeedback('Pick a word!', 'red');
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            if (!SpeechRecognition) return showFeedback('Speech recognition not supported.', 'red');

            const recognition = new SpeechRecognition();
            recognition.lang = currentLanguage;
            recognition.interimResults = false;
            recognition.maxAlternatives = 1;

            const timeout = setTimeout(() => {
                recognition.stop();
                showFeedback('No speech detected. Try again!', 'red');
            }, 5000);

            recognition.onresult = (event) => {
                clearTimeout(timeout);
                const spoken = normalizeText(event.results[0][0].transcript.trim());
                const correct = normalizeText(activeWord);
                if (!spoken) {
                    showFeedback('No word heard. Try again!', 'red');
                } else if (spoken === correct) {
                    if (!wordStatus[activeWord].dictatedCorrectly) {
                        pronunciationScore++;
                        pronunciationStars++;
                        wordStatus[activeWord].dictatedCorrectly = true;
                        renderWordButtons(currentList);
                    }
                    showFeedback(`You said it right! üåü +1 Star`, 'blue');
                } else {
                    showFeedback(`Almost there! You said "${spoken}". Try saying "${correct}"!`, 'red');
                }
                updateScores();
            };

            recognition.onerror = (event) => {
                clearTimeout(timeout);
                showFeedback('Microphone issue. Try again!', 'red');
            };

            recognition.onend = () => {
                disableButtons(false);
            };

            disableButtons(true);
            recognition.start();
            showFeedback('Listening... Say the word!', 'gray');
        }

        function spellWord() {
            if (!activeWord) return showFeedback('Pick a word!', 'red');
            feedbackEl.classList.remove('hidden');
            feedbackEl.innerHTML = '';
            if (currentList.startsWith('g3') || currentList.startsWith('g4') || currentList.startsWith('g5')) {
                const hint = `Hint: Starts with ${activeWord[0]}, ends with ${activeWord[activeWord.length - 1]}`;
                feedbackEl.innerHTML = `<span class="text-gray-600">${hint}</span>`;
            }
            document.querySelectorAll('.word-btn').forEach(btn => {
                if (btn.textContent === activeWord) {
                    btn.classList.add('hidden');
                }
            });
            setTimeout(() => {
                inputContainer.classList.remove('hidden');
                inputEl.value = '';
                inputEl.placeholder = '_ '.repeat(activeWord.replace(/\s/g, '').length).trim();
                inputEl.focus();
            }, 300);
        }

        function checkSpelling() {
            const entered = normalizeText(inputEl.value.trim());
            const correct = normalizeText(activeWord);
            if (!entered) {
                feedbackEl.innerHTML = 'Type the word!';
                feedbackEl.classList.remove('text-gray-700', 'text-green-600', 'text-blue-600', 'hidden');
                feedbackEl.classList.add('text-red-600');
                if (currentList.startsWith('g3') || currentList.startsWith('g4') || currentList.startsWith('g5')) {
                    const hint = `Hint: Starts with ${activeWord[0]}, ends with ${activeWord[activeWord.length - 1]}`;
                    feedbackEl.innerHTML += `<br><span class="text-gray-600">${hint}</span>`;
                }
                document.getElementById('incorrect-sound').play().catch(() => { });
                return;
            }
            document.querySelectorAll('.word-btn').forEach(btn => {
                if (btn.textContent === activeWord) {
                    btn.classList.remove('hidden');
                }
            });
            if (entered === correct) {
                if (!wordStatus[activeWord].spelledCorrectly) {
                    spellingScore++;
                    spellingStars++;
                    wordStatus[activeWord].spelledCorrectly = true;
                    renderWordButtons(currentList);
                }
                inputContainer.classList.add('hidden');
                showFeedback(`Great job! üåü +1 Star`, 'blue');
                updateScores();
                activeWord = '';
                activeButton = null;
                updateButtonHighlight();
            } else {
                feedbackEl.innerHTML = 'So close! Try spelling it again!';
                feedbackEl.classList.remove('text-gray-700', 'text-green-600', 'text-blue-600', 'hidden');
                feedbackEl.classList.add('text-red-600');
                if (currentList.startsWith('g3') || currentList.startsWith('g4') || currentList.startsWith('g5')) {
                    const hint = `Hint: Starts with ${activeWord[0]}, ends with ${activeWord[activeWord.length - 1]}`;
                    feedbackEl.innerHTML += `<br><span class="text-gray-600">${hint}</span>`;
                }
                inputContainer.classList.add('hidden');
                document.getElementById('incorrect-sound').play().catch(() => { });
            }
        }

        inputEl.addEventListener('keypress', (event) => {
            if (event.key === 'Enter') {
                checkSpelling();
            }
        });

        function pickRandomWord() {
            const words = wordLists[currentList];
            if (!words || words.length === 0) {
                showFeedback('No words in this list! Try another!', 'red');
                return;
            }
            const randomIndex = Math.floor(Math.random() * words.length);
            const randomWord = words[randomIndex];
            const button = document.getElementById(`${randomWord.replace(/\s+/g, '-')}-btn`);
            if (button) {
                setActiveWord(randomWord, button);
                showFeedback(`New word picked: "${randomWord}"!`, 'blue');
            } else {
                showFeedback('Error picking a word. Try again!', 'red');
            }
        }

        function showFeedback(message, color) {
            const kidFriendlyMessages = {
                'Pick a word!': 'Pick a word!',
                'Type the word!': 'Type the word!',
                'No words in this list!': 'No words in this list. Try another!',
                'Speech recognition not supported.': 'Your browser can‚Äôt hear you. Try another!',
                'No speech detected. Try again!': 'No speech heard. Try again!',
                'Microphone issue. Try again!': 'Microphone not working. Try again!'
            };
            inputContainer.classList.add('hidden');
            feedbackEl.textContent = kidFriendlyMessages[message] || message;
            feedbackEl.classList.remove('text-gray-700', 'text-green-600', 'text-red-600', 'text-blue-600', 'hidden');
            feedbackEl.classList.add(`text-${color}-600`);
            if (color === 'blue') {
                confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
                document.getElementById('correct-sound').play().catch(() => { });
            } else if (color === 'red') {
                document.getElementById('incorrect-sound').play().catch(() => { });
            }
        }

        function updateScores() {
            const totalWords = wordLists[currentList]?.length || 1;
            const spellingProgressPercent = (spellingScore / totalWords) * 100;
            const pronunciationProgressPercent = (pronunciationScore / totalWords) * 100;

            spellingProgressBarEl.style.width = `${spellingProgressPercent}%`;
            pronunciationProgressBarEl.style.width = `${pronunciationProgressPercent}%`;

            spellingScoreEl.textContent = `Spelling: ${spellingScore}/${totalWords}`;
            pronunciationScoreEl.textContent = `Pronunciation: ${pronunciationScore}/${totalWords}`;

            updateLevel();
        }

        function updateLevel() {
            const totalStars = spellingStars + pronunciationStars;
            let level = 'Beginner';
            if (totalStars >= 20) level = 'Word Wizard';
            else if (totalStars >= 10) level = 'Spell Master';
            levelDisplayEl.textContent = `Level: ${level}`;
        }

        function disableButtons(disabled) {
            document.querySelectorAll('button').forEach(btn => btn.disabled = disabled);
        }
    </script>
</body>
</html>